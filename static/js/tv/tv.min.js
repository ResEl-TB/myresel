'use strict';function o(b){return b.scrollWidth>b.offsetWidth||parseFloat(window.getComputedStyle(b).width)>parseFloat(window.getComputedStyle(b.parentNode).width)}function f(b,c){var g='';return 10>b&&(g+='0'),g+=b+':',10>c&&(g+='0'),g+c}function D(b,c,g){if(!b||!c)return'Indisponible';var h=Math.floor((c-b)/3600),k=Math.floor((c-b)/60)%60,l='';return g?f(h,k):(h&&(l+=h+' h',k&&(l+=' ')),k&&(l+=k+' min'),l)}function T(b){var c=new Date(1e3*b);return f(c.getHours(),c.getMinutes())}function R(b,c){return c?'De '+T(b)+' \xE0 '+T(c):'Dur\xE9e ind\xE9termin\xE9e'}function a(b,c){var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4==g.readyState&&200==g.status){try{var h=JSON.parse(g.responseText)}catch(k){return void console.log(k.message+' in '+g.responseText)}c(h)}},g.open('GET',b,!0),g.send()}function s(){var b=document.body||document.documentElement;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?b.msRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen&&b.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}function P(b,c,g,h,k){var l=this;l.title=b,l.subtitle=c,l.start=g,l.stop=h,l.desc=k}function C(b,c,g){var h=this;h.l=b,h.s=c,h.p=g}function ResElTV(b,c,g){var h=this;h.d=b,h.w=c,h.l=b.getElementById('loading'),h.v=b.getElementById('video'),h.c=b.getElementById('channels'),h.i=0,h.t=0,h.m=null,h.C=[],h.V=100,h.p=100,h.P=!0,h.I=!1,h.h=g,h.r=dashjs.MediaPlayer().create(),h.r.initialize(h.v.querySelector('video')),h.u=function(k){var l=h.d.getElementById('overlay-title');l.innerHTML=k.v.querySelector('.program-title').innerHTML,h.d.getElementById('overlay-subtitle').innerHTML=k.v.querySelector('.subtitle').innerHTML,h.d.getElementById('overlay-description').innerHTML=k.v.querySelector('.description p').innerHTML,h.d.getElementById('overlay-time').innerHTML=k.v.querySelector('.time').innerHTML,h.d.getElementById('overlay-progress').style.width=k.v.querySelector('.progress').style.width,h.d.getElementById('duration-indicator').innerHTML=D(k.c.start,h.T,!0)+' / '+D(k.c.start,k.c.stop,!0),o(l)?l.classList.add('overflow'):l.classList.remove('overflow')},h.S=function(k){return function(){if(h.d.body.classList.remove('expanded'),h.I&&h.L.v.classList.remove('active'),k.v.classList.remove('selected'),k.v.classList.add('active'),h.L=k,h.t){var l=k.v.getBoundingClientRect();h.c.scrollLeft=l.x+(l.width-h.c.clientWidth)*h.scrollRatio-parseFloat(h.w.getComputedStyle(k.v).marginRight)}h.t=0,h.r.attachSource('https://tnt.resel.fr/play/dash/'+k.s+'/index.mpd'),h.I&&h.u(k),h.w.dispatchEvent(new Event('update'))}},h.e=function(k){return function(l){if(l.stopPropagation(),h.t){h.d.body.classList.remove('expanded'),k.v.querySelector('.channel-more').style.visibility='hidden',setTimeout(function(){k.v.querySelector('.channel-more').style.visibility=''},200),k.v.classList.remove('selected'),h.t=0;for(var n,m=h.c.children,q=0;q<m.length;q++)n=m[q].querySelector('.program-title'),o(n)?m[q].classList.add('overflow'):m[q].classList.remove('overflow');var p=k.v.getBoundingClientRect();h.c.scrollLeft=p.x+(p.width-h.c.clientWidth)*h.scrollRatio-parseFloat(h.w.getComputedStyle(k.v).marginRight)}else{var p=k.v.getBoundingClientRect();h.scrollRatio=p.x/(h.c.clientWidth-p.width+2*parseFloat(h.w.getComputedStyle(k.v).marginRight)),h.d.body.classList.add('expanded'),k.v.classList.add('selected'),o(k.v.querySelector('.program-title'))?k.v.classList.add('expoverflow'):k.v.classList.remove('expoverflow'),h.t=1,k.v.querySelector('.content-y').scrollTop=0}h.w.dispatchEvent(new Event('update'))}},h.s=function(){h.m=null,h.d.body.className='fullscreen',h.t=2},h.U=function(k){return function(){h.V=k.value,h.d.querySelector('video').volume=k.value/100,h.d.getElementById('volume1').classList.add('hidden'),h.d.getElementById('volume2').classList.add('hidden'),0<k.value&&(h.d.getElementById('volume1').classList.remove('hidden'),50<=k.value&&h.d.getElementById('volume2').classList.remove('hidden'))}},h.H=function(){var k=h.d.getElementById('volume');0<h.V?(h.p=h.V,k.value=0):(h.V=h.p,k.value=h.V),h.U(k)()},h.E=function(k){h.P?(h.r.pause(),h.P=!1,k.classList.add('paused')):(h.r.play(),h.P=!0,k.classList.remove('paused'))},h.a=function(){h.T=Math.round(new Date().getTime()/1e3);for(var l,k=h.C.length,q=0;q<k;q++){if(l=h.C[q],!l.c||h.T>=l.c.stop){for(var n,m=l.p.length,r=0;r<m;r++)if(n=l.p[r],n.start<=h.T&&h.T<n.stop){l.c=n;break}l.c||(l.c=new P);var p=l.v.querySelector('.program-title');p.innerHTML=l.c.title||'Indisponible',l.v.querySelector('.duration').innerHTML=D(l.c.start,l.c.stop),l.v.querySelector('.subtitle').innerHTML=l.c.subtitle||'Indisponible',l.v.querySelector('.time').innerHTML=R(l.c.start,l.c.stop),l.v.querySelector('.description p').innerHTML=l.c.desc||'Indisponible',l.v.onclick=h.S(l),o(p)?l.v.classList.add('overflow'):l.v.classList.remove('overflow')}l.v.querySelector('.progress').style.width=(l.c.start?Math.round(100*(h.T-l.c.start)/(l.c.stop-l.c.start)):0)+'%',h.u(h.L),h.w.dispatchEvent(new Event('update'))}},a('https://tnt.resel.fr/data.json',function(k){for(var l in ScrollBarX.initEl(h.c),h.c=h.c.firstChild.firstChild,k){var m=new C(l,k[l].sid,k[l].programs);h.c.insertAdjacentHTML('beforeend','<div tabindex="0" class="channel" data-lcn="'+l+'"><div class="flip"><div class="card"><div class="channel-logo" style="background-image: url(\''+h.h+m.s+'.png\');"></div><div class="channel-more"><div class="more-button"></div></div></div></div><div class="program"><div class="program-title"></div><div class="progressbar"><div class="progress"></div></div><div class="duration"></div></div><div class="middle"><div class="subtitle"></div><div class="time"></div></div><div class="right"><div class="description"><p></p></div></div></div>'),m.v=h.c.lastChild,m.v.onclick=h.S(m),m.v.querySelector('.description').onclick=function(r){r.stopPropagation()},m.v.querySelector('.channel-more').onclick=h.e(m),ScrollBarY.initEl(m.v.querySelector('.description')),h.C.push(m)}h.S(h.C[0])(),h.I=!0,h.a(),h.c.onmouseover=function(){h.i=1},h.c.onmouseout=function(){h.i=0},h.d.getElementById('videobar').onmouseover=function(){h.i=1},h.d.getElementById('videobar').onmouseout=function(){h.i=0};var n=function(){h.m&&h.w.clearTimeout(h.m),2==h.t&&(h.d.body.className='',h.t=0),0==h.t+h.i&&(h.m=h.w.setTimeout(h.s,2500))};h.d.onmousemove=n,h.d.onmouseup=n,h.d.onmousedown=n;var p=h.d.getElementById('play-pause');p.onclick=function(){h.E(p)};var q=h.d.getElementById('volume');q.oninput=h.U(q),q.onchange=h.U(q),q.onmousedown=function(){0<q.value&&(h.p=q.value)},h.d.getElementById('sound').onclick=function(){h.H()},h.d.getElementById('fullscreen').onclick=function(){s()},h.l.classList.add('done'),setTimeout(function(){h.d.body.removeChild(h.l)},1e3),setInterval(h.a,1e4)})}