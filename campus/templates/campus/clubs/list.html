{% extends "base_campus.html" %}
{% load staticfiles %}
{% load i18n %}

{% block title %}Associations et clubs{% endblock %}
{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/campus/clubs.css' %}">
{% endblock %}

{% block content %}

{% include "./base_clubs.html" %}
<!-- TODO: conditions sur l'affichage -->
<div class="container">
    <div class="row">
        <div class="col-md-12 well">
          <h2>{% trans 'Assos' %}</h2>
            {% for asso in assos %}
            <div class="row assos-card">
                <div class="col-md-3 col-md-offset-1">
                  {% if asso.logo %}
                  <img class="assos-img" src="/media/image/ASSOS/{{ asso.logo }}">
                  {% endif %}
                </div>
                <div class="col-md-5">
                    <h2>{{ asso.name }}</h2>
                    <p>{{ asso.description }}</p>
                    {% if asso.website %}
                    <p>Mailing list: <a href="mailto:{{ asso.email }}">{{ asso.email}}</a></p>
                    {% endif %}
                    {% if asso.website %}
                    <p><a href="http://{{ asso.website }}">En savoir plus</a></p>
                    {% endif %}
                </div>
                <div class="col-md-3">
                    {% if request.user.is_authenticated %}
                    <p>Actions:</p>
                    <p><a href="{% url 'campus:clubs:edit' asso.cn%}"><span class="fa fa-edit"></span> éditer</a></p>
                    {% endif %}
                </div>
            </div>
            {% empty%}
            {% trans "Une erreur est servenue pendant la récupération des assos" %}
            {% endfor %}
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 well">
            <h2>{% trans 'Clubs' %}</h2>
            {% for club in clubs %}
            <div class="row assos-card">
                <div class="col-md-8 col-md-offset-1">
                    <h2>{{ club.name }}</h2>
                    <p>Mailing list: </p>
                    <p>{{ club.description }}</p>
                    {% if club.website %}
                    <p>Mailing list: <a href="mailto:{{ club.email }}">{{ club.email}}</a></p>
                    {% endif %}
                    {% if club.website %}
                    <p><a href="http://{{ club.website }}">En savoir plus</a></p>
                    {% endif %}
                </div>
                <div class="col-md-3">
                    {% if request.user.is_authenticated %}
                    <p>Actions:</p>
                    <p><a href="{% url 'campus:clubs:edit' club.cn%}"><span class="fa fa-edit"></span> éditer</a></p>
                    <p><a href="{% url 'campus:clubs:addself' club.cn%}"><span class="fa fa-user-plus"></span> m'inscrire</a></p>
                    {% endif %}
                </div>
            </div>
            {% empty %}
            {% trans "Une erreur est servenue pendant la récupération des clubs" %}
            {% endfor %}
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 well">
            <h2>{% trans 'Listes' %}</h2>
            {% for list in lists %}
            <div class="row assos-card">
                <div class="col-md-3 col-md-offset-1">
                    {% if list.logo %}
                    <img class="assos-img" src="/media/image/LIST/{{ list.logo }}">
                    {% endif %}
                </div>
                <div class="col-md-5">
                    <h2>{{ list.name }}</h2>
                    <p>{{ list.description }}</p>
                    <p>Année de campagne: {{ list.campagneYear }}</p>
                    {% if list.website %}
                    <p>Mailing list: <a href="mailto:{{ list.email }}">{{ list.email}}</a></p>
                    {% endif %}
                    {% if list.website %}
                    <p><a href="http://{{ list.website }}">En savoir plus</a></p>
                    {% endif %}
                </div>
                <div class="col-md-3">
                    {% if request.user.is_authenticated %}
                    <p>Actions:</p>
                    <p><a href="{% url 'campus:clubs:edit' list.cn%}"><span class="fa fa-edit"></span> éditer</a></p>
                    {% endif %}
                </div>
            </div>
            {% empty %}
            {% trans "Une erreur est servenue pendant la récupération des listes" %}
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
