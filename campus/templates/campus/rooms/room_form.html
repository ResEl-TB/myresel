{% extends "base_campus.html" %}
{% load staticfiles %}
{% load i18n %}

{% block titre %} {% trans "Ajouter une salle"%} {% endblock %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/campus/rooms.css' %}">
    <link href="{% static 'jquery/jquery-ui.min.css' %}" rel="Stylesheet"></link>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row well">
        <form method="POST" class="form-horizontal">
            {% csrf_token %}
            <div class="col-md-4 col-md-offset-1">
                <div class="form-group">
                    <label>{{form.location.label}}</label>
                    {{form.location.errors}}
                    {{form.location}}
                </div>
                <div class="form-group">
                    <label>{{form.name.label}}</label>
                    {{form.name.errors}}
                    {{form.name}}
                </div>
                <div class="form-group">
                    <label><abbr title="{{form.mailing_list.help_text}}">{{form.mailing_list.label}}<abbr></label>
                    {{form.mailing_list.errors}}
                    {{form.mailing_list}}
                </div>
                <div class="form-check">
                    {{form.private.errors}}
                    {{form.private}}
                    <label class="form-check-label"><abbr title="{{form.private.help_text}}">{{form.private.label}}</abbr></label>
                </div>
            </div>
            <div class="col-md-5 col-md-offset-1">
                <div class="form-group">
                    <label>Chercher un club:</label>
                </div>
                <div class="input-group">
                    <input type="text" class="form-control" id="club_to_add">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button" onclick="addClub()">Ajouter</button>
                    </span>
                </div>
                <div class="form-group">
                    <label><abbr title="{{form.clubs.help_text}}"><br>{{form.clubs.label}}<abbr></label>
                    {{form.clubs.errors}}
                    {{form.clubs}}
                </div>
                <button type="submit" class="btn btn-success pull-right" name="button">Ajouter</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block javascript %}
    <script src="{% static 'jquery/jquery-ui.min.js' %}"></script>
    <script type="text/javascript">
        jQuery(document).ready(function ($) {
          $('#club_to_add').autocomplete({
              source: "{% url 'campus:clubs:getclubs' %}",
              minLength: 3,
          });
        })
    </script>
    <script type="text/javascript">
        function addClub(){
            var text = document.getElementById("club_to_add").value + "\n";
            document.getElementById("clubs_area").value += text;
        }
    </script>
{% endblock %}
